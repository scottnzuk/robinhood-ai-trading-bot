# Workspace Diagnostics Fix Plan (2025-04-06)

## Overview
Systematic resolution of workspace diagnostics including missing imports, security warnings, and code errors.

---

## 1. Missing Imports

### Issues:
- `torch.optim` and `torch.multiprocessing` unresolved in `src/ai_trading_framework/rl_agents/a3c.py`
- `ray` unresolved in `a3c.py` and `src/ai_trading_framework/trainers/ray_tune_trainer.py`
- `ray.tune` unresolved in `ray_tune_trainer.py`

### Actions:
- Verify presence of `torch` and `ray` in `requirements.txt` and `pyproject.toml`
- If missing, add:
  ```
  torch
  ray
  ```
- Install packages via pip:
  ```
  pip install torch ray
  ```

---

## 2. Security Warnings

### a) `a3c.py` line 92
- **Issue:** `.backward` called on an `int`
- **Fix:** Ensure `.backward()` is only called on PyTorch tensors requiring gradients.

### b) `run_backtest.py` lines 16 and 74
- **Issue:** Unsanitized CLI input used in file paths (potential path traversal)
- **Fix:**
  - Use `os.path.abspath()` to normalize paths
  - Validate paths are within allowed directories
  - Reject suspicious inputs

---

## 3. Snyk CLI Errors
- **Note:** Transient or environment-related, monitor after fixes.

---

## 4. Next Steps
- Implement fixes iteratively
- Re-run diagnostics
- Confirm resolution
- Pass to Architect mode for next phase expansion

---

*Generated by Roo on 2025-04-06*